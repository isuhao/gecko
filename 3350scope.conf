# Configuration file for the 3350scope application for the SIS3350 Flash ADC
# This file contains all the important settings in three parts
#
# 1. General settings
# 2. sis3350 settings
# 3. Postprocess settings
#
# Author: Bastian Loeher
# Date created: Wed Nov 18 14:54:07 CET 2009

#################! General settings

# Viewport setup
viewport_x 480
viewport_y 320
viewport_maxY 4096


#################! sis3350 settings

# Device control settings
base_addr 0x30000000
# SIS3350_ACQ_OPERATION_RINGBUFFER_SYNCH
acq_mode 0x000600001
# SIS3350_ACQ_OPERATION_DIRECT_MEMORY_START // Use with caution!
# acq_mode 0x000200005
acq_enable_lemo false
acq_multi_event true
ctrl_lemo_invert false

# Acquisition control settings
multievent_max_nof_events 1
nof_reads 1
pre_delay 200
# multiples of 8 !!!
sample_length 200
# Maximum is 0x07FFFFF8
direct_mem_wrap_length 0x07FFFFF8
# Maximum is 0x07FFFFF8
direct_mem_sample_length 0x3FFFFF8
direct_mem_pretrigger_length 0xFF

# Clock setup: f = 25 MHz * clock1 / 2**clock2
clock1 20
clock2 0

# Trigger 0 setup
trigger_enable_0 true
trigger_fir_0 true
trigger_gap_length_0 6
trigger_gt_0 true
trigger_offset_0 10
trigger_peak_length_0 6
trigger_pulse_length_0 12
trigger_threshold_0 50

# Trigger 1 setup
trigger_enable_1 false
trigger_fir_1 true
trigger_gap_length_1 6
trigger_gt_1 true
trigger_offset_1 10
trigger_peak_length_1 6
trigger_pulse_length_1 12
trigger_threshold_1 0

# Trigger 2 setup
trigger_enable_2 false
trigger_fir_2 true
trigger_gap_length_2 6
trigger_gt_2 true
trigger_offset_2 10
trigger_peak_length_2 6
trigger_pulse_length_2 12
trigger_threshold_2 0

# Trigger 3 setup
trigger_enable_3 false
trigger_fir_3 true
trigger_gap_length_3 6
trigger_gt_3 true
trigger_offset_3 10
trigger_peak_length_3 6
trigger_pulse_length_3 12
trigger_threshold_3 0

ext_clock_trigger_dac_control 1
ext_clock_trigger_daq_data 37500

# Variable gain setup
variable_gain_0 16
variable_gain_1 18
variable_gain_2 248
variable_gain_3 51

# ADC offset setup
adc_offset_0 65500
adc_offset_1 0
adc_offset_2 32060
adc_offset_3 24590

# File output setup
filePath /data/
filePointSkip 1

writeEnabled_0 true
writeEnabled_1 true
writeEnabled_2 true
writeEnabled_3 true

# Pollcount timeout for readout loop 
pollcount 1000


################! Post process settings

# CFD settings
cfd_ftw 3
cfd_thr 100
